# v1.1.17：桌面应用集成与 Homebrew 升级修复

**发布日期**：2026年1月13日

---

## 一句话总结

这次更新修复了 **Homebrew 自动升级** 功能，并大幅改进了桌面应用与 CLI 的集成体验。

---

## 新功能：桌面应用自动管理 CLI

### 这次更新了什么？

桌面应用现在可以自动管理 OpenCode CLI 进程，避免冲突和重复启动。

### 对你有什么好处？

之前的问题：
- macOS 上同时打开桌面应用和 CLI 可能会冲突
- 需要手动关闭 CLI 才能启动桌面应用

现在：
- 桌面应用启动时自动关闭旧的 CLI 进程
- CLI 和桌面应用共享认证，不需要重复登录
- Windows 上通过 JobObject 实现生命周期管理

### 如何使用？

直接正常使用桌面应用即可，无需额外配置：

1. 打开桌面应用
2. 应用会自动处理 CLI 进程
3. 开始工作

---

## 问题修复：Homebrew 自动升级

### 之前的问题

通过 Homebrew 安装 OpenCode 后，运行 `brew upgrade` 无法自动更新到最新版本。

### 现在的情况

Homebrew 自动升级功能已修复，现在可以通过以下方式更新：

```bash
# 自动更新所有包（包括 OpenCode）
brew upgrade

# 或者只更新 OpenCode
brew upgrade opencode
```

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 通过 Homebrew 安装 | ✅ 升级（修复自动升级）|
| 使用桌面应用 | ✅ 升级（改进集成体验）|
| 只用 TUI，没用 Homebrew | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core（核心）

- 移除替换包装脚本的 symlinkBinary 函数
- 修复 Homebrew 自动升级功能

### TUI（终端界面）

- 防止对话框打开时触发问题工具的快捷键

### Desktop（桌面应用）

- macOS 启动桌面应用时自动关闭现有的 OpenCode CLI 进程
- 在桌面应用中设置 serverPassword
- 从桌面应用提供 PTY socket 认证（如果可用）
- 将桌面应用和 CLI 绑定到同一个 Windows JobObject

### 社区贡献

- @zerone0x：修复对话框打开时的问题工具快捷键
- @Brendonovich：多项桌面应用集成改进
- @OpeOginni：优化过滤列表实现

</details>

---

[← 返回更新日志](./index.md)
